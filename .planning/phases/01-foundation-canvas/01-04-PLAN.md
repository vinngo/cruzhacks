---
phase: 01-foundation-canvas
plan: 04
type: execute
wave: 3
depends_on: [01-02, 01-03]
files_modified:
  - app/page.tsx
  - app/workspace/page.tsx
autonomous: false

must_haves:
  truths:
    - "User can navigate from landing to workspace"
    - "User can navigate back from workspace to landing"
    - "Navigation transitions are smooth"
    - "Complete flow works: land -> input -> workspace -> draw -> persist"
  artifacts:
    - path: "app/page.tsx"
      provides: "Working navigation from landing to workspace"
      contains: "router.push"
    - path: "app/workspace/page.tsx"
      provides: "Complete workspace with all panels and canvas"
      min_lines: 50
  key_links:
    - from: "Landing page submit"
      to: "Workspace page"
      via: "Next.js router navigation"
      pattern: "router\\.push\\(['\"]\/workspace['\"]\\)"
    - from: "Browser back button"
      to: "Landing page"
      via: "Browser history"
      pattern: "router\\.back"
---

<objective>
Wire together landing page and workspace navigation, then verify the complete Phase 1 user flow works end-to-end.

Purpose: Ensure seamless navigation between landing and workspace, and validate all Phase 1 requirements are met through user testing.
Output: Fully functional Phase 1 application ready for user interaction.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@/Users/vincentngo/dev/cruzhacks/.planning/PROJECT.md
@/Users/vincentngo/dev/cruzhacks/.planning/ROADMAP.md
@/Users/vincentngo/dev/cruzhacks/.planning/REQUIREMENTS.md
@/Users/vincentngo/dev/cruzhacks/.planning/phases/01-foundation-canvas/01-CONTEXT.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Verify and polish navigation flow</name>
  <files>
    app/page.tsx
    app/workspace/page.tsx
  </files>
  <action>
    Verify navigation works correctly between landing and workspace. Polish any rough edges.

    Check app/page.tsx:
    - Verify router.push('/workspace') is called on form submit
    - Verify form prevents default submission (e.preventDefault)
    - Ensure submit only happens if input has content (validation)
    - Optional: Store problem description in sessionStorage or URL params for Phase 2 (user's discretion)

    Check app/workspace/page.tsx:
    - Verify page renders without errors when navigated to
    - Verify tldraw loads correctly via dynamic import
    - Verify no SSR hydration errors in console

    Test navigation:
    1. Run `npm run dev`
    2. Visit localhost:3000 (landing page)
    3. Enter problem text
    4. Click submit - should navigate to /workspace
    5. Verify workspace loads with canvas
    6. Use browser back button - should return to landing
    7. Verify Framer Motion transitions are smooth both directions

    If any issues found, fix them:
    - Navigation not working: check router.push syntax
    - Transitions janky: adjust Framer Motion transition duration
    - Canvas not loading: verify dynamic import ssr: false
    - Errors in console: address TypeScript or runtime issues

    Add any final polish:
    - Loading states if needed
    - Error boundaries if appropriate
    - Minor styling adjustments
  </action>
  <verify>
    Run `npm run dev` and test complete navigation flow:
    1. Start at localhost:3000
    2. Type problem in input
    3. Submit - navigates to workspace with smooth transition
    4. Canvas loads and displays welcome hint
    5. Browser back - returns to landing with smooth transition
    6. Forward - returns to workspace
    7. No console errors throughout flow

    Check browser DevTools:
    - Console: No errors or warnings
    - Network: All assets load (fonts, tldraw CSS)
    - Performance: No layout shifts or jank
  </verify>
  <done>
    Navigation works bidirectionally (landing <-> workspace), transitions are smooth, no console errors, all assets load correctly.
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
    Complete Phase 1 application: landing page with chat input, smooth transitions, three-panel workspace, and fully functional tldraw canvas with persistence.
  </what-built>
  <how-to-verify>
    Test the complete user flow:

    1. **Landing Page:**
       - Visit http://localhost:3000
       - Verify page fades in smoothly
       - Verify "Socratic Whiteboard" heading uses serif font
       - Verify centered chat input is prominent
       - Verify academic/clean aesthetic (lots of whitespace)

    2. **Input & Navigation:**
       - Type a sample problem: "Solve x^2 + 5x + 6 = 0"
       - Click submit button
       - Verify smooth fade-out transition
       - Verify navigation to workspace

    3. **Workspace Layout:**
       - Verify three-panel layout displays
       - Verify left panel (~20% width) shows "Problem" heading and placeholder
       - Verify center panel (~80% width) shows tldraw canvas
       - Verify resize handle between panels is visible
       - Drag resize handle - verify panels resize smoothly

    4. **Canvas Functionality:**
       - Verify welcome hint text appears on empty canvas
       - Select pen tool from toolbar
       - Draw freehand shapes and lines
       - Select rectangle tool - add rectangles
       - Select circle tool - add circles
       - Select eraser tool - erase some content
       - Verify drawing feels smooth and responsive

    5. **Persistence:**
       - Draw something distinctive (your initials or a shape)
       - Refresh the page (Cmd+R / Ctrl+R)
       - Verify your drawing persists after reload
       - Clear localStorage (DevTools > Application > Local Storage > clear)
       - Refresh page
       - Verify welcome hint reappears on empty canvas

    6. **Navigation Back:**
       - Click browser back button
       - Verify smooth transition back to landing page
       - Verify landing page state is intact
       - Click forward or re-submit
       - Verify workspace loads with persisted canvas

    7. **Visual Polish:**
       - Check for any visual glitches or layout issues
       - Verify fonts look good (serif headings, sans-serif body)
       - Verify spacing and whitespace feel balanced
       - Verify no UI elements overlap or clip

    8. **Developer Console:**
       - Open DevTools Console
       - Verify no errors (red messages)
       - Verify no warnings about hydration or SSR
       - Network tab: verify tldraw CSS loads
       - Application tab: verify localStorage persists canvas data

    **Expected Outcome:**
    All requirements from Phase 1 are met:
    - INIT-01: Landing page with centered chat input ✓
    - INIT-04: Transition to workspace after submit ✓
    - WORK-01: Problem panel displays (placeholder) ✓
    - WORK-02: Canvas area shows tldraw ✓
    - WORK-04: Clear visual hierarchy ✓
    - CANV-01: Draw and write freely ✓
    - CANV-03: Canvas persists during session ✓
    - CANV-04: Standard drawing tools available ✓
  </how-to-verify>
  <resume-signal>
    If everything works as expected, type: **approved**

    If issues found, describe them specifically:
    - What doesn't work?
    - What did you expect vs what happened?
    - Any console errors?

    Example: "Canvas doesn't load - shows loading spinner forever. Console error: window is not defined"
  </resume-signal>
</task>

</tasks>

<verification>
Phase 1 complete verification checklist:

**Landing Page:**
- [ ] Displays on localhost:3000
- [ ] Centered chat input visible
- [ ] Serif heading (academic aesthetic)
- [ ] Clean ChatGPT/Claude style
- [ ] Smooth fade-in animation

**Navigation:**
- [ ] Submit navigates to /workspace
- [ ] Smooth page transitions (Framer Motion)
- [ ] Browser back button works
- [ ] No navigation errors

**Workspace:**
- [ ] Three-panel layout renders
- [ ] Problem panel (~20%) on left
- [ ] Canvas (~80%) in center
- [ ] Panels resizable via drag handle
- [ ] Visual hierarchy clear (canvas dominant)

**Canvas:**
- [ ] tldraw renders with proper styling
- [ ] Welcome hint on empty canvas
- [ ] Pen tool draws smoothly
- [ ] Shapes tool works (rectangle, circle)
- [ ] Eraser removes content
- [ ] Canvas persists across refresh
- [ ] No lag or performance issues

**Technical:**
- [ ] No console errors
- [ ] No hydration warnings
- [ ] All fonts load (serif for headings)
- [ ] Tailwind classes work
- [ ] localStorage contains canvas data
- [ ] tldraw CSS loads correctly

**Requirements Coverage:**
- [ ] INIT-01: Landing page with centered input
- [ ] INIT-04: Transition to workspace
- [ ] WORK-01: Problem panel (placeholder)
- [ ] WORK-02: Canvas area with tldraw
- [ ] WORK-04: Visual hierarchy
- [ ] CANV-01: Free drawing/writing
- [ ] CANV-03: Session persistence
- [ ] CANV-04: Drawing tools available
</verification>

<success_criteria>
1. Complete user flow works: landing -> input -> workspace -> draw -> persist
2. All Phase 1 requirements met (8 requirements: INIT-01, INIT-04, WORK-01, WORK-02, WORK-04, CANV-01, CANV-03, CANV-04)
3. Navigation is smooth and polished (Framer Motion transitions)
4. Canvas functionality is complete (draw, shapes, erase, persist)
5. No technical errors (console clean, no hydration issues)
6. Visual design matches requirements (serif fonts, academic aesthetic, clear hierarchy)
7. User verification passes (human confirms flow works as expected)
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation-canvas/01-04-SUMMARY.md`
</output>
